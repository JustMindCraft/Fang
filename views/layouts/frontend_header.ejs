<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title><%= title %></title>

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
   <!-- Compiled and minified CSS -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
   <link rel="stylesheet" href="/css/style.css">

   <!-- Compiled and minified JavaScript -->
   <script src="http://localhost:8000/gun/gun.min.js"></script>
</head>
<body>
  <nav class="white nav-header" role="navigation">
    <div class="nav-wrapper container">
      <a id="logo-container" href="/" class="brand-logo">正觉工场</a>
      <ul class="right hide-on-med-and-down">
          <% var hasFold = false %>
            <% if(menu.length === 0) {%>
              <li><a href="/login">登录</a></li>

            <% }else{ %>
             
              <% for(var i=0; i < menu.length; i++){ %>
               
                <% if(menu[i].isFold === false) { %>
                  <li><a href="<%= menu[i].path %>"><%= menu[i].name %></a></li>
                <% } %>
              <% } %>
              
             <!-- Dropdown Structure -->
              <ul id='dropdown1' class='dropdown-content'>
                <% for(var j=0; j < menu.length; j++){ %>
             
                  <% if(menu[j].isFold === true) { %>
                    <% hasFold = true %>
                    <li><a href="<%= menu[j].path %>"><%= menu[j].name %> </a></li>
                  <% } %>
                <% } %>
              </ul>

              <% if(hasFold === true) { %>
                <a class='dropdown-trigger btn' href='#' data-target='dropdown1'>管理面板</a>
              <% }%>


            <% } %>
          
         
       
        
      </ul>

      <ul id="nav-mobile" class="sidenav">
          <% if(menu.length === 0) {%>
            <li><a href="/login">登录</a></li>

          <% }else{ %>
            <% for(var k=0; k < menu.length; k++){ %>
               
              <% if(menu[k].isFold === false) { %>
                <li><a href="<%= menu[k].path %>"><%= menu[k].name %></a></li>
              <% } %>
            <% } %>

            <% if(hasFold === true) { %>
              <ul class="collapsible">
                  <li>
                    <div class="collapsible-header">管理面板</div>
                    <div class="collapsible-body">
                            <% for(var l=0; l < menu.length; l++){ %>
                         
                              <% if(menu[l].isFold === true) { %>
                                <% hasFold = true %>
                                <a href="<%= menu[l].path %>"><%= menu[l].name %></a>
                              <% } %>
                            <% } %>
                    </div>
                  </li>
              </ul>
            <% }%>


          <% } %>
      </ul>
      <a href="#" data-target="nav-mobile" class="sidenav-trigger"><i class="material-icons">menu</i></a>
    </div>
  </nav>
  <div class="main-content">

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      var dropElems = document.querySelectorAll('.dropdown-trigger');
      var instances = M.Dropdown.init(dropElems, {});
      var colElems = document.querySelectorAll('.collapsible');
      instances = M.Collapsible.init(colElems, {});
    });
  </script>